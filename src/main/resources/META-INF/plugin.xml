<?xml version="1.0" encoding="UTF-8"?>
<idea-plugin>
    <id>com.example.contextpilot</id>
    <name>ContextPilot</name>
    <vendor email="your.email@example.com" url="https://www.example.com">Your Company</vendor>

    <description><![CDATA[
        ContextPilot for IntelliJ - A tool for understanding code context and relationships.
        
        Features:
        - Index your workspace for better code understanding
        - Find related files based on code context
        - View commit history and changes
        - Analyze code relationships
    ]]></description>

    <depends>com.intellij.modules.platform</depends>
    <depends>Git4Idea</depends>

    <extensions defaultExtensionNs="com.intellij">
        <projectService serviceImplementation="com.example.ContextPilotService"/>
        <statusBarWidgetFactory implementation="com.example.ContextPilotStatusBarWidgetFactory"/>
        <postStartupActivity implementation="com.example.ContextPilotStartupActivity"/>
    </extensions>

    <actions>
        <group id="ContextPilot.MainMenu" text="ContextPilot" description="ContextPilot actions">
            <add-to-group group-id="MainMenu" anchor="before" relative-to-action="HelpMenu"/>
            
            <action id="ContextPilot.IndexWorkspace" 
                    class="com.example.actions.IndexWorkspaceAction"
                    text="Index Workspace"
                    description="Index the current workspace with ContextPilot">
            </action>

            <action id="ContextPilot.GetContextFiles"
                    class="com.example.actions.GetContextFilesAction"
                    text="Get Context Files"
                    description="Get related files based on current context">
                <keyboard-shortcut keymap="$default" first-keystroke="control alt C"/>
            </action>

            <action id="ContextPilot.GetCommitDescriptions"
                    class="com.example.actions.GetCommitDescriptionsAction"
                    text="Get Commit Descriptions"
                    description="Get commit descriptions for the selected code">
                <keyboard-shortcut keymap="$default" first-keystroke="control alt D"/>
            </action>

            <action id="ContextPilot.GenerateDiffs"
                    class="com.example.actions.GenerateDiffsAction"
                    text="Generate Diffs"
                    description="Generate diffs for the selected code">
                <keyboard-shortcut keymap="$default" first-keystroke="control alt G"/>
            </action>
        </group>

        <!-- Editor popup menu -->
        <group id="ContextPilot.EditorPopup">
            <add-to-group group-id="EditorPopupMenu" anchor="first"/>
            <reference ref="ContextPilot.GetContextFiles"/>
            <reference ref="ContextPilot.GetCommitDescriptions"/>
            <reference ref="ContextPilot.GenerateDiffs"/>
        </group>
    </actions>
</idea-plugin> 